# WebFly ğŸš€

[English](README.md) | ç®€ä½“ä¸­æ–‡

<div align="center">

<img src="assets/logo/webfly_logo.png" alt="WebFly Logo" width="120" height="120" />

[![Flutter](https://img.shields.io/badge/Flutter-3.38.7-02569B?logo=flutter)](https://flutter.dev)
[![Dart](https://img.shields.io/badge/Dart-3.10.7-0175C2?logo=dart)](https://dart.dev)
[![WebF](https://img.shields.io/badge/WebF-0.24.6-FF6B6B)](https://github.com/openwebf/webf)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

**â­ å¦‚æœè§‰å¾— WebFly æœ‰ç”¨ï¼Œè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼â­**

*åŸç”Ÿèƒ½åŠ›ä¸ Web çµæ´»æ€§çš„å®Œç¾ç»“åˆ - ç»ˆææ··åˆè¿è¡Œæ—¶*

</div>

---

**WebFly** æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŸºäº Flutter çš„ Web åº”ç”¨å¯åŠ¨å™¨å’Œè¿è¡Œæ—¶ç¯å¢ƒï¼Œå…·æœ‰åŸç”Ÿè®¾å¤‡èƒ½åŠ›ã€‚ä¸ä¼ ç»Ÿçš„ Web å®¹å™¨ï¼ˆå¦‚ Expo Go æˆ– WebF Goï¼‰ä¸åŒï¼ŒWebFly æä¾›äº†ä¸åŸç”Ÿè®¾å¤‡åŠŸèƒ½çš„æ·±åº¦é›†æˆï¼ŒåŒæ—¶ä¿æŒäº† Web å¼€å‘çš„çµæ´»æ€§ã€‚

## ğŸŒŸ ä¸ºä»€ä¹ˆé€‰æ‹© WebFlyï¼Ÿ

### å†…ç½®åŸç”Ÿèƒ½åŠ›

WebFly ä¸ä»…ä»…æ˜¯ä¸€ä¸ª Web æµè§ˆå™¨ - å®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åŸç”Ÿè¿è¡Œæ—¶ï¼Œé›†æˆäº†è®¾å¤‡ APIï¼š

- **ğŸ”µ è“ç‰™ä½åŠŸè€—ï¼ˆBLEï¼‰** - é€šè¿‡ `webf_bluetooth` ç›´æ¥è®¿é—® BLE è®¾å¤‡
- **ğŸ’¾ SQLite æ•°æ®åº“** - ä½¿ç”¨ `webf_sqflite` è¿›è¡Œæœ¬åœ°æ•°æ®åº“å­˜å‚¨
- **ğŸ”— åŸç”Ÿåˆ†äº«** - é€šè¿‡ `webf_share` é›†æˆç³»ç»Ÿåˆ†äº«åŠŸèƒ½
- **ğŸ“± åŸç”Ÿ UI ç»„ä»¶** - æ— ç¼çš„ Flutter-Web æ··åˆç•Œé¢
- **ğŸ¯ äºŒç»´ç æ‰«æ** - å†…ç½®ç§»åŠ¨æ‰«æå™¨ï¼Œå¿«é€Ÿå¯åŠ¨åº”ç”¨

### å¯¹æ¯” Expo Go / WebF Go

| åŠŸèƒ½ç‰¹æ€§ | WebFly | Expo Go / WebF Go |
|---------|--------|-------------------|
| **åŸç”Ÿ API** | âœ… é¢„é›†æˆï¼ˆBLEã€SQLiteã€åˆ†äº«ï¼‰ | âŒ ä»…é™åŸºç¡€ API |
| **è‡ªå®šä¹‰åŸç”Ÿä»£ç ** | âœ… å®Œå…¨å¯å®šåˆ¶ | âŒ éœ€è¦ eject |
| **ç¦»çº¿æ•°æ®åº“** | âœ… å†…ç½® SQLite | âš ï¸ å­˜å‚¨å—é™ |
| **è®¾å¤‡é›†æˆ** | âœ… æ·±åº¦åŸç”Ÿé›†æˆ | âš ï¸ ä»…åŸºç¡€åŠŸèƒ½ |
| **å¼€å‘è°ƒè¯•** | âœ… çƒ­é‡è½½ + åŸç”Ÿè°ƒè¯• | âœ… ä»…çƒ­é‡è½½ |
| **åº”ç”¨åˆ†å‘** | âœ… ç‹¬ç«‹ APK/IPA | âš ï¸ éœ€è¦å®¿ä¸»åº”ç”¨ |

## ğŸ“¸ åº”ç”¨æˆªå›¾

<div align="center">

### å¯åŠ¨å™¨ç•Œé¢
<img src="docs/screenshots/homepage.png" alt="å¯åŠ¨å™¨" width="300" />

*ä¸»å¯åŠ¨å™¨ï¼šURL è¾“å…¥ã€äºŒç»´ç æ‰«æå’Œå†å²è®°å½•*

</div>

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. **æ··åˆè·¯ç”±ç³»ç»Ÿ**
- Web è·¯ç”±ä¸ Flutter é¡µé¢ä¹‹é—´æ— ç¼å¯¼èˆª
- å…±äº« WebF æ§åˆ¶å™¨ä»¥æå‡æ€§èƒ½
- è·¯ç”±ç„¦ç‚¹ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸå¤„ç†

### 2. **æ™ºèƒ½ URL å†å²**
- æœ€è¿‘è®¿é—®çš„ URL å¿«é€Ÿè®¿é—®
- å³æ»‘åˆ é™¤æ‰‹åŠ¿
- ç¼–è¾‘æ¨¡å¼æ”¯æŒæ‰¹é‡æ“ä½œ
- è·¨ä¼šè¯æŒä¹…åŒ–å†å²è®°å½•

### 3. **äºŒç»´ç å¯åŠ¨å™¨**
- æ‰«æäºŒç»´ç å³æ—¶åŠ è½½åº”ç”¨
- æ”¯æŒ URL å’Œè·¯å¾„å‚æ•°
- éå¸¸é€‚åˆæ¼”ç¤ºå’Œæµ‹è¯•

### 4. **å¼€å‘è€…å·¥å…·**
- WebF æ£€æŸ¥å™¨è¦†ç›–å±‚ç”¨äºè°ƒè¯•
- JavaScript æ§åˆ¶å°é›†æˆ
- ç½‘ç»œè¯·æ±‚ç›‘æ§
- å¯é…ç½®çš„è®¾ç½®é¢æ¿

### 5. **èµ„æº HTTP æœåŠ¡å™¨**
- ä¸ºæ‰“åŒ…èµ„æºæä¾›å†…ç½®æœ¬åœ°æœåŠ¡å™¨
- å¼€å‘æœŸé—´æ”¯æŒçƒ­é‡è½½
- é«˜æ•ˆçš„èµ„æºäº¤ä»˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Flutter 3.38.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- Dart SDK ^3.10.7
- Android SDKï¼ˆç”¨äº Android æ„å»ºï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/your-org/webfly.git
   cd webfly
   ```

2. **åˆå§‹åŒ– submodule**
  ```bash
  git submodule update --init --recursive
  ```

3. **å®‰è£… Flutter ä¾èµ–**
   ```bash
   flutter pub get
   ```

4. **å®‰è£… Web ä¾èµ–**ï¼ˆç”¨äºç¤ºä¾‹ç”¨ä¾‹ï¼‰
   ```bash
  cd frontend
  pnpm install
   ```

5. **è¿è¡Œåº”ç”¨**
   ```bash
  # ä»ä»“åº“æ ¹ç›®å½•
  flutter run
   ```

## ğŸ“± ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨ Web åº”ç”¨

**æ–¹æ³• 1ï¼šæ‰‹åŠ¨è¾“å…¥ URL**
- è¾“å…¥ bundle URLï¼ˆä¾‹å¦‚ï¼š`http://example.com/bundle.js`ï¼‰
- å¯é€‰æ‹©åœ¨é«˜çº§é€‰é¡¹ä¸­æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„
- ç‚¹å‡»"å¯åŠ¨"å¼€å§‹è¿è¡Œ

**æ–¹æ³• 2ï¼šæ‰«æäºŒç»´ç **
- ç‚¹å‡»äºŒç»´ç å›¾æ ‡
- æ‰«æåŒ…å« bundle URL çš„äºŒç»´ç 
- åº”ç”¨è‡ªåŠ¨å¯åŠ¨

**æ–¹æ³• 3ï¼šå†å²è®°å½•**
- ç‚¹å‡»ä»»æ„æœ€è¿‘çš„ URL å¡«å……è¾“å…¥æ¡†
- ç‚¹å‡»ç®­å¤´æŒ‰é’®ç›´æ¥å¯åŠ¨
- å‘å·¦æ»‘åŠ¨åˆ é™¤æ¡ç›®

### åœ¨ Web åº”ç”¨ä¸­ä½¿ç”¨åŸç”Ÿ API

```javascript
// è“ç‰™ LE æ‰«æ
if (window.webf?.bluetooth) {
  const devices = await window.webf.bluetooth.scan();
  // è¿æ¥å¹¶ä¸ BLE è®¾å¤‡äº¤äº’
}

// SQLite æ•°æ®åº“
if (window.webf?.sqflite) {
  const db = await window.webf.sqflite.openDatabase('mydb.db');
  await db.execute('CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, name TEXT)');
}

// åŸç”Ÿåˆ†äº«
if (window.webf?.share) {
  await window.webf.share.share({
    title: 'çœ‹çœ‹è¿™ä¸ªï¼',
    text: 'å…·æœ‰åŸç”ŸåŠŸèƒ½çš„è¶…æ£’ Web åº”ç”¨',
    url: 'https://example.com'
  });
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
webfly/
â”œâ”€â”€ lib/                    # Flutter åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ screens/            # é¡µé¢ï¼ˆlauncher/webf/scanner/diagnostics ç­‰ï¼‰
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ widgets/            # å¯å¤ç”¨ç»„ä»¶
â”‚   â””â”€â”€ router/             # å¯¼èˆªé…ç½®
â”œâ”€â”€ assets/                 # å›¾ç‰‡ã€Logoã€æ‰“åŒ… use_cases
â”œâ”€â”€ platforms/              # å¹³å°æ¨¡æ¿ï¼ˆsource-of-truthï¼‰
â”œâ”€â”€ flutter_tools/          # æ„å»º/å¼€å‘å·¥å…·ï¼ˆRust + è„šæœ¬ï¼Œgit submoduleï¼‰
â”œâ”€â”€ tools/                  # ä»“åº“å·¥å…·ï¼ˆRustï¼‰
â”œâ”€â”€ frontend/               # Web åº”ç”¨ï¼ˆViteï¼‰
â””â”€â”€ pubspec.yaml            # Flutter ä¾èµ–
```

### å¼€å‘å·¥å…·

WebFly åŒ…å«äº†åŸºäº Rust çš„è‡ªå®šä¹‰å·¥å…·ï¼ˆä½äº `flutter_tools/`ï¼‰ï¼Œç”¨äºå¢å¼ºå¼€å‘å·¥ä½œæµï¼ˆè®¾å¤‡é€‰æ‹©ã€ç”Ÿæˆå¹³å°ç›®å½•ã€ç”Ÿæˆ Logoã€è®°å½•æ—¥å¿—ç­‰ï¼‰ã€‚

### Flutter ä»»åŠ¡ï¼ˆJustï¼‰

ä»ä»“åº“æ ¹ç›®å½•è¿è¡Œï¼š

```bash
# ç”Ÿæˆå¹³å°ç›®å½•ï¼ˆä» platforms/ æ¨¡æ¿ç”Ÿæˆï¼‰
just gen-platforms

# åªç”Ÿæˆ Logoï¼ˆä¸åº”ç”¨ï¼‰
just logo

# ç”Ÿæˆ Logo å¹¶åº”ç”¨åˆ° launcher icons / splash
just gen-logo

# è¿è¡Œ Androidï¼ˆè‡ªåŠ¨é€‰æ‹©è®¾å¤‡ï¼‰
just android

# è¿è¡Œ Windows
just windows

# æ„å»ºå‘å¸ƒç‰ˆ APK
just build-apk
```

### Web å¼€å‘

```bash
cd frontend
pnpm dev
pnpm build
```

### ä»æºç æ„å»º

**Android APK**
```bash
# é€šè¿‡ justï¼ˆæ¨èï¼‰ï¼š
just build-apk

# æˆ–æ‰‹åŠ¨æ‰§è¡Œï¼š
flutter build apk --release --obfuscate --split-debug-info=build/app/outputs/symbols
```

**Android App Bundle**
```bash
flutter build appbundle --release
```

### è‡ªå®šä¹‰å¼€å‘

**æ·»åŠ è‡ªå®šä¹‰åŸç”Ÿæ’ä»¶ï¼š**
1. å°†æ’ä»¶ä¾èµ–æ·»åŠ åˆ° `pubspec.yaml`
2. åœ¨ `services/` ä¸­ä¸ WebF bridge é›†æˆ
3. å°† API æš´éœ²åˆ° JavaScript ä¸Šä¸‹æ–‡

**ä¿®æ”¹ UI ä¸»é¢˜ï¼š**
- ç¼–è¾‘ `lib/main.dart` ä¿®æ”¹åº”ç”¨å…¨å±€ä¸»é¢˜
- åœ¨ `screens/launcher/widgets/` ä¸­è‡ªå®šä¹‰å¯åŠ¨å™¨ç»„ä»¶

## âš™ï¸ é…ç½®è¯´æ˜

### åº”ç”¨è®¾ç½®

é€šè¿‡å¯åŠ¨å™¨ä¸­çš„è®¾ç½®æŒ‰é’®ï¼ˆâš™ï¸ï¼‰è®¿é—®ï¼š

- **WebF æ£€æŸ¥å™¨**ï¼šå¯ç”¨/ç¦ç”¨å¼€å‘è€…è¦†ç›–å±‚
- **ç¼“å­˜æ§åˆ¶å™¨**ï¼šåœ¨å¯¼èˆªä¹‹é—´ä¿æŒ WebF æ§åˆ¶å™¨æ´»è·ƒ

### Bundle æœåŠ¡å™¨

åœ¨å¼€å‘æ—¶ï¼Œå†…ç½® HTTP æœåŠ¡å™¨ä»ä»¥ä¸‹ä½ç½®æä¾›èµ„æºï¼š
- ç«¯å£ï¼šè‡ªåŠ¨åˆ†é…ï¼ˆæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼‰
- åŸºç¡€ URLï¼š`http://localhost:{port}/`
- èµ„æºè·¯å¾„ï¼š`assets/use_cases/`

## ğŸ“¦ ä¾èµ–é¡¹

### æ ¸å¿ƒä¾èµ–
- `webf: ^0.24.6` - Web æ¸²æŸ“å¼•æ“
- `hooks_riverpod: ^3.2.0` - çŠ¶æ€ç®¡ç†
- `go_router: ^17.0.1` - å¯¼èˆª

### åŸç”Ÿèƒ½åŠ›
- `webf_bluetooth: ^1.0.0` - BLE æ”¯æŒ
- `webf_sqflite: ^1.0.1` - SQLite æ•°æ®åº“
- `webf_share: ^1.1.0` - åŸç”Ÿåˆ†äº«
- `mobile_scanner: ^7.1.4` - äºŒç»´ç æ‰«æ

### å·¥å…·åº“
- `shared_preferences: ^2.5.4` - æœ¬åœ°å­˜å‚¨
- `shelf: ^1.4.2` - HTTP æœåŠ¡å™¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

## ğŸ“„ è®¸å¯è¯

[åœ¨æ­¤æ·»åŠ æ‚¨çš„è®¸å¯è¯]

## ğŸ™ è‡´è°¢

åŸºäº [WebF](https://github.com/openwebf/webf) æ„å»º - é«˜æ€§èƒ½çš„ Flutter Web æ¸²æŸ“å¼•æ“ã€‚

---

**ç”¨ â¤ï¸ ä¸ºéœ€è¦åŸç”Ÿèƒ½åŠ›å’Œ Web çµæ´»æ€§çš„å¼€å‘è€…æ‰“é€ **
